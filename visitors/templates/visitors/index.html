{% load socialaccount %}
<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>(Private) - {{location}} Visitors Counter</title>
  </head>
  <body>

    <div class="nav bg-dark"><div class="container pb-3 pt-5 shadow-sm"><h3 class="row text-light">{{location}} Visitors Counter</h3></div></div>

    <div class="container mt-5 mb-3">

      <div class="row">
        <div class="col text-center">
          <h1 class="display-4 text-secondary">{{capacity}}</h1>
          <h5 class="mt-3 pb-5 text-secondary">Maximum Capacity<br><strong>{{location}}</strong></h5>
        </div>
        <div class="col text-center">
          <h1 class="text-center display-1">{{current}}</h1>
          <h5 class="text-center mt-3 pb-5">Visitors currently at {{location}}</h5>
        </div>
        <div class="col text-center">
          <h1 class="display-4 text-secondary">{{total_today}}</h1>
          <h5 class="mt-3 pb-5 text-secondary">Total visitors today</h5>
        </div>
      </div>

      <hr class="mt-5">
      <h3 class="text-center mb-5">Update this count by:</h3>
      <p class="text-center"></p>
      <div class="text-center algin-middle">
        <button id="minus" type="button" class="btn btn-lg btn-outline-dark">-</button>
        <span id="count_label" class="display-3 mx-5">0</span>
        <button id="plus" type="button" class="btn btn-lg btn-outline-dark">+</button>
      </div>

      <form method="POST" action="/visitors/submit/">
        {% csrf_token %}
        <input type="hidden" id="location" name="location" value="{{ location }}">
        <input type="hidden" name="count" id="count" value="0">
        <div class="form-group justify-content-center ">
          <p class="pt-5 text-center">Submitting as:<br>
            {{ user.email }}
            <a href={% url 'HOME' %}>(change)</a></p>
        </div>
        <div class=" text-center justify-content-center">
        <button id="submit_button" type="submit" class="btn btn-lg btn-success">Submit Change & Refresh</button>

        </div>
      </form>

      <div class="mt-5"><br></div>
      <div>
        {{info | safe}}
      </div>

    </div>





    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <script type="text/javascript">

    // Declare the initial count variable to be 1
    var count_value = 0

    function minus_function(){

      if(count_value<-9){
        $("#count").val("-10")
        $("#count_label").html("-10")
      }
      else{
        count_value = count_value - 1
        $("#count").val(count_value)
        $("#count_label").html(count_value)
      }

    }

    function plus_function(){
      if(count_value>9){
        $("#count").val("10")
        $("#count_label").html("10")
      }
      else{
        count_value = count_value + 1
        $("#count").val(count_value)
        $("#count_label").html(count_value)
      }
    }

    $(document).ready(function(){

      $("#minus").on("click",minus_function)
      $("#plus").on("click", plus_function)


    // CHEAP OVERRIDE OF PANDAS DATAFRAME!!!!!!!!!!!
    // $("thead tr").prop("style","") //MAKES THE THEAD TR ROW GO CENTER ALIGNED

    })


    </script>



  </body>
</html>
